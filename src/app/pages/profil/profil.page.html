<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Profil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Refresher -->
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p>Memuat profil...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && error" class="error-container">
    <ion-icon name="alert-circle-outline" color="danger"></ion-icon>
    <p>{{ error }}</p>
    <ion-button (click)="loadProfile()" fill="outline" size="small">
      <ion-icon slot="start" name="refresh-outline"></ion-icon>
      Coba Lagi
    </ion-button>
  </div>

  <!-- Profile Content -->
  <div *ngIf="!isLoading && !error && profile" class="profile-container">
    <!-- Header Card with Avatar -->
    <div class="profile-header">
      <div class="avatar-container">
        <ion-avatar class="profile-avatar">
          <img [src]="getAvatarUrl()" [alt]="getDisplayName()" />
        </ion-avatar>
      </div>
      <h1 class="profile-name">{{ getDisplayName() }}</h1>
      <ion-chip color="primary" class="role-chip">
        <ion-label>{{ getRoleText() }}</ion-label>
      </ion-chip>
    </div>

    <!-- Menu List -->
    <ion-list class="menu-list" lines="none">
      <ion-item button (click)="openAccountInfo()" detail="false">
        <ion-icon name="person-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h2>Informasi Akun</h2>
          <p>Lihat detail informasi akun Anda</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>

      <ion-item button (click)="openSecurity()" detail="false">
        <ion-icon
          name="lock-closed-outline"
          slot="start"
          color="primary"
        ></ion-icon>
        <ion-label>
          <h2>Keamanan Akun</h2>
          <p>Ubah password dan pengaturan keamanan</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>

      <ion-item button (click)="openHelpCenter()" detail="false">
        <ion-icon
          name="help-circle-outline"
          slot="start"
          color="primary"
        ></ion-icon>
        <ion-label>
          <h2>Pusat Bantuan</h2>
          <p>FAQ dan informasi kontak dukungan</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>

      <ion-item button (click)="openTerms()" detail="false">
        <ion-icon
          name="document-text-outline"
          slot="start"
          color="primary"
        ></ion-icon>
        <ion-label>
          <h2>Syarat & Ketentuan</h2>
          <p>Ketentuan penggunaan aplikasi</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>

      <ion-item button (click)="openPrivacy()" detail="false">
        <ion-icon
          name="shield-checkmark-outline"
          slot="start"
          color="primary"
        ></ion-icon>
        <ion-label>
          <h2>Kebijakan Privasi</h2>
          <p>Cara kami melindungi data Anda</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>

      <ion-item button (click)="openAbout()" detail="false">
        <ion-icon
          name="information-circle-outline"
          slot="start"
          color="primary"
        ></ion-icon>
        <ion-label>
          <h2>Tentang Aplikasi</h2>
          <p>Versi dan informasi aplikasi</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>

      <!-- Logout Button -->
      <ion-item button (click)="logout()" detail="false" class="logout-item">
        <ion-icon name="log-out-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger">
          <h2>Keluar</h2>
          <p>Logout dari aplikasi</p>
        </ion-label>
        <ion-icon
          name="chevron-forward-outline"
          slot="end"
          color="medium"
        ></ion-icon>
      </ion-item>
    </ion-list>
  </div>
</ion-content>
